!function(e){function t(t){for(var a,i,c=t[0],s=t[1],l=t[2],p=0,m=[];p<c.length;p++)i=c[p],Object.prototype.hasOwnProperty.call(o,i)&&o[i]&&m.push(o[i][0]),o[i]=0;for(a in s)Object.prototype.hasOwnProperty.call(s,a)&&(e[a]=s[a]);for(u&&u(t);m.length;)m.shift()();return r.push.apply(r,l||[]),n()}function n(){for(var e,t=0;t<r.length;t++){for(var n=r[t],a=!0,c=1;c<n.length;c++){var s=n[c];0!==o[s]&&(a=!1)}a&&(r.splice(t--,1),e=i(i.s=n[0]))}return e}var a={},o={2:0},r=[];function i(t){if(a[t])return a[t].exports;var n=a[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=e,i.c=a,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)i.d(n,a,function(t){return e[t]}.bind(null,a));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="";var c=window.webpackJsonp=window.webpackJsonp||[],s=c.push.bind(c);c.push=t,c=c.slice();for(var l=0;l<c.length;l++)t(c[l]);var u=s;r.push([21,0]),n()}({2:function(e,t,n){"use strict";n.d(t,"a",(function(){return p}));var a=n(0),o=n.n(a);function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function s(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var p=function(e){function t(){return i(this,t),s(this,l(t).apply(this,arguments))}var n,a,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(t,e),n=t,(a=[{key:"render",value:function(){return o.a.createElement("div",{className:"ui mini delete modal transition"},o.a.createElement("div",{className:"header"}," Delete ",this.props.title," "),o.a.createElement("div",{className:"content"},o.a.createElement("p",null,"Are you sure you want to delete Â ",this.props.content?o.a.createElement("span",{className:"ui label"},this.props.content):o.a.createElement("span",null,"this ",this.props.title),"?")),o.a.createElement("div",{className:"actions"},o.a.createElement("div",{className:"ui basic positive button",tabIndex:"0"},"No"),o.a.createElement("div",{className:"ui negative right labeled icon button",onClick:this.props.onYes,tabIndex:"0"},"Yes",o.a.createElement("i",{className:"trash icon"}))))}}])&&c(n.prototype,a),r&&c(n,r),t}(o.a.Component)},21:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),r=n(4),i=n.n(r);function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function l(e,t){return!t||"object"!==c(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var m=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=l(this,u(t).call(this,e))).onChange=function(e,t){n.setState({selected:e}),localStorage.setItem(n.props.id,e.id),n.props.onChange(e)},n.state={selected:null},n}var n,a,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(t,e),n=t,(a=[{key:"componentDidUpdate",value:function(e){if(this.props.items!=e.items){var t=this.props.items,n=localStorage.getItem(this.props.id),a=t[0];n&&(a=t.find((function(e){return e.id==n}))),this.onChange(a)}}},{key:"render",value:function(){var e=this,t=this.props.items;return o.a.createElement("div",{className:"ui mini buttons"},t.map((function(t){var n;return o.a.createElement("button",{key:t.id,onClick:e.onChange.bind(e,t),className:"ui button "+((null===(n=e.state.selected)||void 0===n?void 0:n.id)==t.id?"active":"")},t.name)})))}}])&&s(n.prototype,a),r&&s(n,r),t}(o.a.Component);function f(e){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function d(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function h(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function b(e,t){return!t||"object"!==f(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function y(e){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function v(e,t){return(v=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var g=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=b(this,y(t).call(this,e))).onChange=function(e){var t;n.setState((d(t={},e.target.name,e.target.value),d(t,"message",null),t))},n.onSubmit=function(e){e.preventDefault();var t=n.state,a=t.minutes,o=t.content;n.props.onSave({minutes:a,content:o}),n.setState({content:"",minutes:0})},n.state={minutes:0,content:""},n}var n,a,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&v(e,t)}(t,e),n=t,(a=[{key:"render",value:function(){return o.a.createElement("form",{className:"ui mini modal add transition form",onSubmit:this.onSubmit}," ",o.a.createElement("div",{className:"header"},"Add Note"),o.a.createElement("div",{className:"content"},o.a.createElement("div",{className:"field"},o.a.createElement("label",null,"Content"),o.a.createElement("textarea",{rows:"2",name:"content",onChange:this.onChange,value:this.state.content})),o.a.createElement("div",{className:"field"},o.a.createElement("label",null,"Time Spent (minutes)"),o.a.createElement("input",{type:"number",name:"minutes",onChange:this.onChange,value:this.state.minutes}))),o.a.createElement("div",{className:"actions"},o.a.createElement("div",{className:"ui secondary deny basic button",tabIndex:"0"},"Cancel"),o.a.createElement("button",{type:"submit",className:"ui basic positive right button",onClick:this.props.onAdd,tabIndex:"0"},"Save")))}}])&&h(n.prototype,a),r&&h(n,r),t}(o.a.Component),E=n(2);function k(e){return(k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function j(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function N(e,t){return!t||"object"!==k(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function S(e){return(S=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function O(e,t){return(O=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var w=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=N(this,S(t).call(this,e))).onChange=function(e){var t,a,o;n.setState((t={},a=e.target.name,o=e.target.value,a in t?Object.defineProperty(t,a,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[a]=o,t))},n.onSubmit=function(e){e.preventDefault();var t=n.state.date;n.props.onSave(t),n.setState({date:""})},n.state={date:""},n}var n,a,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&O(e,t)}(t,e),n=t,(a=[{key:"setDate",value:function(e){this.setState({date:e})}},{key:"render",value:function(){return o.a.createElement("form",{className:"ui mini modal due-date transition form",onSubmit:this.onSubmit}," ",o.a.createElement("div",{className:"header"},"Add Due Date"),o.a.createElement("div",{className:"content"},o.a.createElement("div",{className:"field"},o.a.createElement("label",null,"Due date"),o.a.createElement("input",{type:"date",name:"date",onChange:this.onChange,value:this.state.date}))),o.a.createElement("div",{className:"actions"},o.a.createElement("div",{className:"ui secondary deny basic button",tabIndex:"0"},"Cancel"),o.a.createElement("button",{type:"submit",className:"ui basic positive right button",onClick:this.props.onAdd,tabIndex:"0"},"Save")))}}])&&j(n.prototype,a),r&&j(n,r),t}(o.a.Component);function C(e){return(C="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function D(e,t){return!t||"object"!==C(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function P(e){return(P=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function M(e,t){return(M=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var x={api:"/api/campus"},I={api:"/api/project/bycampus/"},T={api:"/api/note/"},Y={api_completed:"/api/project/markcheckpoint",api_duedate:"/api/project/markduedate"},R=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=D(this,P(t).call(this,e))).loadItems=function(){axios.get(x.api).then((function(e){n.setState({campuses:e.data})}))},n.dueText=function(e){if(null==e.dueDate)return null;var t=moment().startOf("day"),n=moment(e.dueDate),a=moment.duration(n.diff(t)),o={y:Math.floor(Math.abs(a.as("y"))),m:Math.floor(Math.abs(a.as("M"))),w:Math.floor(Math.abs(a.as("w"))),d:Math.floor(Math.abs(a.as("d"))),isOverdue:a.asDays()<0},r=function(e,t){var n=Math.floor(e);return 1==n?n+" "+t:n+" "+t+"s"},i="";return i=o.y>0?r(o.y,"year"):o.m>0?r(o.m,"month"):o.w>0?r(o.w,"week"):r(o.d,"day"),o.isOverdue?i+" overdue":"0 days"==i?"Due today":"Due in "+i},n.loadCheckpointsDue=function(){var e=n.state.projects.map((function(e){var t=e.checkpoints.find((function(e){return!e.completed&&e.dueDate}));return t?{project:e,checkpoint:t,dueDays:n.dueText(t)}:null})).filter((function(e){return null!=e}));n.setState({checkpointsDue:e})},n.addNote=function(e,t){n.project=e,$(".ui.modal.add").modal("show")},n.onSaveNote=function(e){n.busy||(n.busy=!0,e.timestamp=moment().format("YYYY-MM-DDTHH:mm:ss"),e.projectId=n.project.id,axios.post(T.api,e).then((function(e){n.reloadNotes(e.data),n.busy=!1})))},n.deleteNote=function(e,t,a){n.project=t,n.note=e,$(".ui.modal.delete").modal("show")},n.onConfirmDelete=function(){axios.delete(T.api+n.note.id).then((function(e){return n.reloadNotes(e.data)}))},n.onClickCheckpoint=function(e,a){if(e.enabled){var o={checkpointId:e.checkpointId,projectId:e.projectId};o.completed=!e.completed,axios.put(Y.api_completed,o).then((function(a){var r=n.state.projects.find((function(t){return t.id==e.projectId}));r.checkpoints.find((function(t){return t.checkpointId==e.checkpointId})).completed=o.completed,t.calculateProgress(r),n.setState({projects:n.state.projects}),n.loadCheckpointsDue()}))}},n.onClickDueDate=function(e,t){n.checkpoint=e;var a=e.dueDate?e.dueDate.substr(0,10):"";n.modalRef.setDate(a),$(".ui.modal.due-date").modal("show")},n.onChangeDue=function(e){var t=n.checkpoint,a={checkpointId:t.checkpointId,projectId:t.projectId,dueDate:e};axios.put(Y.api_duedate,a).then((function(t){n.checkpoint.dueDate=e,n.setState({projects:n.state.projects}),n.loadCheckpointsDue()}))},n.changeCampus=function(e){n.setState({loading:!0}),axios.get(I.api+e.id).then((function(e){var a=e.data;a.forEach((function(e){return t.calculateProgress(e)})),n.setState({projects:a,loading:!1}),n.loadCheckpointsDue()}))},n.state={campuses:[],projects:[],loading:!0,message:null,dueDate:"",checkpointsDue:[]},n.busy=!1,n}var n,a,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&M(e,t)}(t,e),n=t,r=[{key:"calculateProgress",value:function(e){var t=e.checkpoints.length;if(t>0){var n=e.checkpoints.filter((function(e){return e.completed})).length;e.percentage=Math.ceil(100*n/t)}else e.percentage=100;for(var a=0,o=0;o<t;o++)if(!e.checkpoints[o].completed){a=o;break}for(0==a&&e.checkpoints.length>0&&e.checkpoints[0].completed&&(a=e.checkpoints.length),o=0;o<t;o++)e.checkpoints[o].current=o==a,e.checkpoints[o].enabled=o==a||o==a-1;var r=Math.max(a-2,0);for(t-r<4&&(r=Math.max(t-4,0)),o=0;o<t;o++)e.checkpoints[o].style={transform:"translateY("+20*-r+"px)",opacity:o<r||o>=r+4?0:1}}}],(a=[{key:"componentDidMount",value:function(){this.loadItems()}},{key:"reloadNotes",value:function(e){this.project.totalTime=e.totalTime,this.project.notes=e.notes,this.setState({projects:this.state.projects})}},{key:"render",value:function(){var e=this;return o.a.createElement(o.a.Fragment,null,this.state.checkpointsDue.length>0&&o.a.createElement("div",{className:"ui checkpoints due info message"},o.a.createElement("div",{className:"header"},"Next checkpoints"),o.a.createElement("ul",{className:"list"},this.state.checkpointsDue.map((function(e){return o.a.createElement("li",{key:e.project.id},o.a.createElement("a",{href:"#project-"+e.project.id,className:"title"},e.project.partner)," :",o.a.createElement("span",{className:"due-days"},e.dueDays),"(",moment(e.checkpoint.dueDate).format("MMMM D YYYY"),")")})))),o.a.createElement("div",{className:"ui middle center aligned grid"},o.a.createElement(m,{id:"dashboardButtons",items:this.state.campuses,onChange:this.changeCampus})),o.a.createElement("div",{className:"ui middle center aligned grid"},o.a.createElement("div",{className:this.state.loading?"ui active centered inline loader":""}),0==this.state.projects.length&&!this.state.loading&&o.a.createElement("div",{className:"ui info compact message"}," No active projects were found for this campus ")),o.a.createElement("div",{className:"ui middle center aligned grid"},o.a.createElement("div",{className:"content"},this.state.projects.map((function(t){return o.a.createElement(o.a.Fragment,{key:t.id},o.a.createElement("article",{id:"project-"+t.id,className:"project ui two column doubling stackable grid"},o.a.createElement("div",{className:"column"},o.a.createElement("span",{className:"title"},t.partner),o.a.createElement("span",{className:"grayed"},t.category.name),o.a.createElement("span",{className:"time"},"Total time: ",A(t.totalTime)),o.a.createElement("div",{className:"status"},"Status: ",t.status.name),o.a.createElement("div",{className:"ui green progress"},o.a.createElement("div",{className:"bar",style:{width:t.percentage+"%"}},t.percentage>0&&o.a.createElement("div",{className:"progress"},t.percentage+"%"))),o.a.createElement("div",{className:"section"},"Current checkpoint:"),o.a.createElement("div",{className:"checkpoints"},t.checkpoints.map((function(t){return o.a.createElement("div",{key:t.projectId+":"+t.checkpointId,style:t.style,className:"checkpoint "+(t.current?" current ":"")+(t.enabled?" enabled ":"")},o.a.createElement("label",{className:"text",onClick:e.onClickCheckpoint.bind(e,t)},o.a.createElement("i",{className:"icon circle outline "+(t.completed?"check":"")}),t.checkpoint.description),o.a.createElement("span",{className:"due-date",tabIndex:"0",onClick:e.onClickDueDate.bind(e,t)},o.a.createElement("span",null,"Due: "),t.dueDate&&o.a.createElement("span",null,moment(t.dueDate).format("MMMM D YYYY")),o.a.createElement("i",{className:"icon calendar alternate outline"})))})))),o.a.createElement("div",{className:"column"},o.a.createElement("div",{className:"section"},"Latest Notes",o.a.createElement("button",{className:"ui basic mini button",onClick:e.addNote.bind(e,t)},o.a.createElement("i",{className:"plus icon"})," Add note")),t.notes.slice(0,4).map((function(n){return o.a.createElement("div",{key:n.id,className:"note"},o.a.createElement("div",null,o.a.createElement("i",{className:"icon calendar alternate outline"}),o.a.createElement("span",{className:"grayed"},moment(n.timestamp).format("MMMM D YYYY, h:mm:ss a")," "),o.a.createElement("i",{className:"icon clock outline"}),o.a.createElement("span",{className:"grayed"},"Time spent: ",n.minutes," minutes.")),o.a.createElement("div",null,n.content,o.a.createElement("i",{className:"grayed icon trash alternate",onClick:e.deleteNote.bind(e,n,t),title:"Delete this note"})))})))),o.a.createElement("div",{className:"ui divider"}))})))),o.a.createElement(g,{onSave:this.onSaveNote}),o.a.createElement(E.a,{onYes:this.onConfirmDelete,title:"note"}),o.a.createElement(w,{ref:function(t){e.modalRef=t},onSave:this.onChangeDue}))}}])&&_(n.prototype,a),r&&_(n,r),t}(o.a.Component),A=function(e){var t=Math.floor(e/60),n=e%60;return t>0&&n>0?t+"H "+n+"M":t>0?t+"H":n+"M"},H=(t.default=R,document.querySelector("#dashboard"));i.a.render(o.a.createElement(R,{}),H)}});